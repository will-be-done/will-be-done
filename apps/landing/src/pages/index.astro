---
import Layout from '../layouts/Layout.astro';

const APP_URL = import.meta.env.PUBLIC_APP_URL ?? 'https://app.will-be-done.app';

const logoPath =
  'M40.4835 111.929C39.5895 111.929 38.7321 111.575 38.0999 110.945C37.4678 110.316 37.1126 109.462 37.1126 108.571V41.4286C37.1126 40.5382 37.4678 39.6843 38.0999 39.0547C38.7321 38.4251 39.5895 38.0714 40.4835 38.0714H102.845C104.186 38.0714 105.472 37.5409 106.42 36.5965C107.368 35.6521 107.901 34.3713 107.901 33.0357C107.901 31.7002 107.368 30.4193 106.42 29.4749C105.472 28.5305 104.186 28 102.845 28H40.4835C36.9074 28 33.4779 29.4148 30.9492 31.9331C28.4206 34.4515 27 37.8671 27 41.4286V108.571C27 112.133 28.4206 115.549 30.9492 118.067C33.4779 120.585 36.9074 122 40.4835 122H107.901C111.477 122 114.907 120.585 117.435 118.067C119.964 115.549 121.384 112.133 121.384 108.571V86.75C121.384 85.4144 120.852 84.1336 119.903 83.1892C118.955 82.2448 117.669 81.7143 116.328 81.7143C114.987 81.7143 113.701 82.2448 112.753 83.1892C111.804 84.1336 111.272 85.4144 111.272 86.75V108.571C111.272 109.462 110.917 110.316 110.284 110.945C109.652 111.575 108.795 111.929 107.901 111.929H40.4835ZM126.643 52.7086C127.536 51.754 128.022 50.4914 127.999 49.1868C127.976 47.8822 127.445 46.6375 126.519 45.7148C125.593 44.7922 124.343 44.2637 123.033 44.2407C121.723 44.2177 120.455 44.7019 119.497 45.5914L82.0261 82.9027L69.3988 69.9039C68.9381 69.4244 68.3868 69.0404 67.7766 68.7739C67.1664 68.5074 66.5093 68.3636 65.843 68.3508C65.1768 68.3381 64.5147 68.4566 63.8946 68.6995C63.2746 68.9425 62.7088 69.3051 62.23 69.7666C61.7511 70.228 61.3685 70.7791 61.1042 71.3883C60.84 71.9975 60.6992 72.6527 60.69 73.3163C60.6808 73.9798 60.8034 74.6386 61.0508 75.2548C61.2981 75.871 61.6653 76.4325 62.1312 76.9069L78.3316 93.5851C78.7978 94.0666 79.3555 94.4508 79.9724 94.7152C80.5892 94.9797 81.2528 95.1191 81.9243 95.1254C82.5959 95.1316 83.2619 95.0046 83.8836 94.7517C84.5053 94.4987 85.0702 94.125 85.5453 93.6523L126.643 52.7086Z';
---

<Layout>
  <div class="relative min-h-screen bg-[#0a0a0f] text-slate-100 antialiased">
    <!-- Subtle gradient orbs -->
    <div class="pointer-events-none fixed inset-0 overflow-hidden">
      <div class="absolute -top-[400px] left-1/2 h-[800px] w-[800px] -translate-x-1/2 rounded-full bg-blue-600/8 blur-[120px]"></div>
      <div class="absolute -bottom-[200px] -right-[200px] h-[600px] w-[600px] rounded-full bg-indigo-500/6 blur-[100px]"></div>
    </div>

    <!-- Noise texture overlay -->
    <div
      class="pointer-events-none fixed inset-0 opacity-[0.015]"
      style={`background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E")`}
    ></div>

    <nav class="sr-only" aria-label="Main navigation">
      <a href="/">Home</a>
      <a href={`${APP_URL}/signup`}>Sign Up</a>
      <a href={`${APP_URL}/login`}>Sign In</a>
      <a href="https://github.com/will-be-done/will-be-done">GitHub</a>
    </nav>

    <main>
      <!-- Hero -->
      <section aria-label="Hero" class="relative px-6 pb-16 pt-20 md:pb-20 md:pt-10">
        <div class="mx-auto max-w-5xl">
          <div class="grid items-center gap-12 lg:grid-cols-2">
            <div>
              <div class="mb-6 inline-flex flex-wrap items-center gap-2 rounded-full bg-blue-500/10 px-3 py-1.5 ring-1 ring-blue-500/20">
                <span class="text-[12px] font-medium tracking-wide text-blue-300">Open Source</span>
                <span class="text-blue-400/50">Â·</span>
                <span class="text-[12px] font-medium tracking-wide text-blue-300">Self Hosted</span>
                <span class="text-blue-400/50">Â·</span>
                <span class="text-[12px] font-medium tracking-wide text-blue-300">Local-First</span>
                <span class="text-blue-400/50">Â·</span>
                <span class="text-[12px] font-medium tracking-wide text-blue-300">Mobile Ready</span>
              </div>

              <h1 class="mb-5 font-bold tracking-tight text-white">
                <span class="block text-[11px] font-semibold uppercase tracking-[0.18em] text-slate-500 mb-3">Open source task management</span>
                <span class="block text-4xl md:text-5xl lg:text-[50px] leading-[1.1]">Actually instant.<br />Actually offline.</span>
              </h1>

              <p class="mb-8 max-w-lg text-[17px] leading-relaxed text-slate-400">
                Most task managers store your data on the server â€” which means spinners,
                latency, and a broken app when connectivity drops. Will Be Done keeps a
                full database copy in your browser. Every action is instant, it works when
                your server is down, and changes sync in real-time across all your devices
                and tabs.
              </p>

              <div class="grid w-fit grid-cols-2 gap-3">
                <a
                  href="https://github.com/will-be-done/will-be-done"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="inline-flex items-center gap-2 rounded-xl bg-white/[0.05] px-5 py-3 text-[14px] font-medium text-slate-300 ring-1 ring-white/[0.08] transition-all hover:bg-white/[0.08] hover:text-white"
                  data-ph-event="github_link_clicked"
                  data-ph-section="hero"
                >
                  <svg class="h-4 w-4" fill="currentColor" viewBox="0 0 24 24">
                    <path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd" />
                  </svg>
                  View on GitHub
                </a>
                <a
                  href="https://demo.will-be-done.app"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="inline-flex items-center gap-2 rounded-xl border border-blue-500/30 bg-blue-500/[0.07] px-5 py-3 text-[14px] font-medium text-blue-300 transition-all hover:border-blue-400/50 hover:bg-blue-500/[0.12] hover:text-blue-200"
                  data-ph-event="demo_clicked"
                  data-ph-section="hero"
                >
                  <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.75">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z" />
                  </svg>
                  Live Demo
                </a>
                <div class="flex flex-col gap-1.5 mt-3">
                  <a
                    href={`${APP_URL}/signup`}
                    class="group inline-flex items-center gap-2 rounded-xl bg-blue-500 px-5 py-3 text-[14px] font-semibold text-white shadow-lg shadow-blue-500/25 transition-all hover:bg-blue-400 hover:shadow-blue-500/30"
                    data-ph-event="signup_cta_clicked"
                    data-ph-section="hero"
                  >
                    Try Cloud Version
                    <svg class="h-4 w-4 transition-transform group-hover:translate-x-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                    </svg>
                  </a>
                  <span class="text-[12px] text-slate-500">Free while in alpha</span>
                </div>
              </div>

              <!-- Mobile video preview -->
              <button
                data-open-modal
                aria-label="Play demo video"
                class="relative mt-8 w-full cursor-pointer overflow-hidden rounded-xl ring-1 ring-white/10 transition-transform duration-300 ease-out active:scale-[0.98] lg:hidden"
              >
                <video autoplay loop muted playsinline class="pointer-events-none aspect-video w-full object-cover">
                  <source src="/site_embed_1080p.webm" type="video/webm" />
                  <source src="/site_embed_1080p.mp4" type="video/mp4" />
                </video>
                <div class="absolute inset-0 flex items-center justify-center">
                  <div class="flex h-12 w-12 items-center justify-center rounded-full bg-white/20 ring-1 ring-white/30 backdrop-blur-sm">
                    <svg class="ml-0.5 h-5 w-5 text-white" fill="currentColor" viewBox="0 0 24 24">
                      <path d="M8 5v14l11-7z" />
                    </svg>
                  </div>
                </div>
              </button>
            </div>

            <!-- Floating task cards -->
            <div class="relative hidden h-[380px] lg:block">
              <!-- Card 1 - Top left (behind thumbnail) -->
              <div
                data-parallax
                data-rotate="-2"
                data-mx="4"
                data-my="3"
                class="absolute left-0 top-0 z-0 w-64 rounded-lg backdrop-blur-md ring-1 ring-ring shadow-lg transition-transform duration-300 ease-out"
              >
                <div class="flex items-start gap-1.5 px-2 pt-2 text-base font-medium bg-panel/80 pb-3 rounded-t-lg">
                  <div class="mt-0.5 flex size-4 flex-shrink-0 items-center justify-center rounded-sm bg-input-bg ring-1 ring-ring"></div>
                  <div class="min-h-5 text-content">Design new landing page</div>
                </div>
                <div class="flex justify-between rounded-b-lg bg-panel-tinted/80 px-2 py-1.5 text-xs text-content-tinted">
                  <span>Week</span>
                  <span>ðŸŽ¨ Personal</span>
                </div>
              </div>

              <!-- Card 2 - Right (done, in front of thumbnail) -->
              <div
                data-parallax
                data-rotate="1"
                data-mx="-5"
                data-my="4"
                class="absolute right-0 top-16 z-20 w-72 rounded-lg backdrop-blur-md ring-1 ring-done-ring shadow-lg transition-transform duration-300 ease-out"
              >
                <div class="flex items-start gap-1.5 px-2 pt-2 text-base font-medium bg-done-panel/80 pb-3 rounded-t-lg">
                  <div class="mt-0.5 flex size-4 flex-shrink-0 items-center justify-center rounded-sm bg-input-checked ring-1 ring-input-checked">
                    <svg class="size-2.5 text-white" fill="currentColor" viewBox="0 0 10 10">
                      <path d="M9.1603 1.12218C9.50684 1.34873 9.60427 1.81354 9.37792 2.16038L5.13603 8.66012C5.01614 8.8438 4.82192 8.96576 4.60451 8.99384C4.3871 9.02194 4.1683 8.95335 4.00574 8.80615L1.24664 6.30769C0.939709 6.02975 0.916013 5.55541 1.19372 5.24822C1.47142 4.94102 1.94536 4.91731 2.2523 5.19524L4.36085 7.10461L8.12299 1.33999C8.34934 0.993152 8.81376 0.895638 9.1603 1.12218Z" />
                    </svg>
                  </div>
                  <div class="min-h-5 text-done-content line-through">Review pull requests</div>
                </div>
                <div class="flex justify-between rounded-b-lg bg-done-panel-tinted/80 px-2 py-1.5 text-xs text-done-content">
                  <span>Week</span>
                  <span>ðŸ’¼ Work</span>
                </div>
              </div>

              <!-- Card 3 - Bottom left (behind thumbnail) -->
              <div
                data-parallax
                data-rotate="2"
                data-mx="3"
                data-my="-4"
                class="absolute bottom-16 left-0 z-0 w-60 rounded-lg backdrop-blur-md ring-1 ring-ring shadow-lg transition-transform duration-300 ease-out"
              >
                <div class="flex items-start gap-1.5 px-2 pt-2 text-base font-medium bg-panel/80 pb-3 rounded-t-lg">
                  <div class="mt-0.5 flex size-4 flex-shrink-0 items-center justify-center rounded-sm bg-input-bg ring-1 ring-ring"></div>
                  <div class="min-h-5 text-content">Write documentation</div>
                </div>
                <div class="flex justify-between rounded-b-lg bg-panel-tinted/80 px-2 py-1.5 text-xs text-content-tinted">
                  <span>Near future</span>
                  <span>ðŸ’¼ Work</span>
                </div>
              </div>

              <!-- Card 4 - Bottom right (focused, in front of thumbnail) -->
              <div
                data-parallax
                data-rotate="-1"
                data-mx="-4"
                data-my="-3"
                class="absolute bottom-0 right-4 z-20 w-56 rounded-lg backdrop-blur-md ring-2 ring-accent shadow-lg transition-transform duration-300 ease-out"
              >
                <div class="flex items-start gap-1.5 px-2 pt-2 text-base font-medium bg-panel-hover/80 pb-3 rounded-t-lg">
                  <div class="mt-0.5 flex size-4 flex-shrink-0 items-center justify-center rounded-sm bg-input-bg ring-1 ring-ring"></div>
                  <div class="min-h-5 text-content">Ship v2.0 release</div>
                </div>
                <div class="flex justify-between rounded-b-lg bg-panel-tinted/80 px-2 py-1.5 text-xs text-content-tinted">
                  <span>Week</span>
                  <span>ðŸš€ Release</span>
                </div>
              </div>

              <!-- Video thumbnail wrapper -->
              <div
                data-parallax
                data-mx="2"
                data-my="2"
                class="absolute left-1/2 top-1/2 z-30 h-[180px] w-[280px]"
                style="transform: translate(-50%, -50%)"
              >
                <button
                  data-open-modal
                  aria-label="Play demo video"
                  class="h-full w-full cursor-pointer overflow-hidden rounded-xl ring-1 ring-white/10 transition-transform duration-300 ease-out hover:scale-105"
                >
                  <video autoplay loop muted playsinline class="pointer-events-none h-full w-full object-cover">
                    <source src="/site_embed_1080p.webm" type="video/webm" />
                    <source src="/site_embed_1080p.mp4" type="video/mp4" />
                  </video>
                  <div class="absolute inset-0 flex items-center justify-center">
                    <div class="flex h-14 w-14 items-center justify-center rounded-full bg-white/20 ring-1 ring-white/30 backdrop-blur-sm">
                      <svg class="ml-0.5 h-6 w-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M8 5v14l11-7z" />
                      </svg>
                    </div>
                  </div>
                </button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Self-host section -->
      <section aria-label="Self-hosting" class="relative border-t border-white/[0.04] px-6 py-20">
        <div class="mx-auto max-w-5xl">
          <div class="grid gap-12 lg:grid-cols-2 lg:gap-16">
            <div>
              <div class="mb-4 inline-flex items-center gap-2 rounded-lg bg-slate-800/50 px-3 py-1.5">
                <svg class="h-4 w-4 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2" />
                </svg>
                <span class="text-[12px] font-medium text-slate-400">Self-hosted</span>
              </div>

              <h2 class="mb-4 text-2xl font-bold tracking-tight text-white md:text-3xl">
                One command to own your data
              </h2>

              <p class="mb-6 text-[15px] leading-relaxed text-slate-400">
                Run it on your own server. No external dependencies, no
                accounts, no tracking. Just a simple Docker container.
              </p>

              <ul class="space-y-3 text-[14px] text-slate-400">
                <li class="flex items-center gap-3">
                  <div class="flex h-5 w-5 items-center justify-center rounded-full bg-blue-500/10">
                    <svg class="h-3 w-3 text-blue-400" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                    </svg>
                  </div>
                  SQLite database, easily backed up
                </li>
                <li class="flex items-center gap-3">
                  <div class="flex h-5 w-5 items-center justify-center rounded-full bg-blue-500/10">
                    <svg class="h-3 w-3 text-blue-400" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                    </svg>
                  </div>
                  Local-first: full database in the browser, works offline
                </li>
                <li class="flex items-center gap-3">
                  <div class="flex h-5 w-5 items-center justify-center rounded-full bg-blue-500/10">
                    <svg class="h-3 w-3 text-blue-400" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                    </svg>
                  </div>
                  Multi-space support for work &amp; personal
                </li>
              </ul>
            </div>

            <div class="overflow-hidden rounded-xl bg-[#0d0d14] ring-1 ring-white/[0.08]">
              <div class="flex items-center gap-2 bg-[#1a1a1f] px-3 py-2.5">
                <div class="flex gap-1.5">
                  <div class="h-2.5 w-2.5 rounded-full bg-[#ff5f57]"></div>
                  <div class="h-2.5 w-2.5 rounded-full bg-[#febc2e]"></div>
                  <div class="h-2.5 w-2.5 rounded-full bg-[#28c840]"></div>
                </div>
                <span class="ml-2 text-[11px] text-slate-500">terminal</span>
              </div>
              <pre class="overflow-x-auto p-5 font-mono text-[13px] leading-relaxed"><code><span class="text-slate-500">$</span> <span class="text-slate-200">docker run -d \</span>
  <span class="text-slate-400">-p 3000:3000 \</span>
  <span class="text-slate-400">-v will_be_done:/var/lib/will-be-done \</span>
  <span class="text-slate-400">--restart unless-stopped \</span>
  <span class="text-blue-400">ghcr.io/will-be-done/will-be-done:latest</span>

<span class="text-green-400">âœ“</span> <span class="text-slate-400">Running at</span> <span class="text-blue-300">http://localhost:3000</span></code></pre>
            </div>
          </div>
        </div>
      </section>

      <!-- Built differently -->
      <section aria-label="Why Will Be Done" class="relative border-t border-white/[0.04] px-6 py-20">
        <div class="mx-auto max-w-5xl">
          <p class="mb-2 text-[11px] font-semibold uppercase tracking-widest text-slate-500">Built differently</p>
          <h2 class="mb-3 text-2xl font-bold tracking-tight text-white md:text-3xl">
            What most task managers get wrong
          </h2>
          <p class="mb-10 max-w-2xl text-[15px] leading-relaxed text-slate-400">
            We researched every major self-hosted task manager before building this.
            Most cut at least one important corner. Will Be Done doesn't. It designed to be local-first from the start.
          </p>

          <div class="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
            <!-- True offline mode -->
            <div class="rounded-xl bg-green-500/[0.04] p-5 ring-1 ring-green-500/[0.15] transition-colors hover:bg-green-500/[0.07] hover:ring-green-500/[0.25]">
              <div class="mb-3 flex h-9 w-9 items-center justify-center rounded-lg bg-green-500/10 text-green-400">
                <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M8.288 15.038a5.25 5.25 0 017.424 0M5.106 11.856c3.807-3.808 9.98-3.808 13.788 0M1.924 8.674c5.565-5.565 14.587-5.565 20.152 0M12.53 18.22l-.53.53-.53-.53a.75.75 0 011.06 0z" />
                </svg>
              </div>
              <h3 class="mb-1.5 text-[14px] font-medium text-white">True offline mode</h3>
              <p class="text-[13px] leading-relaxed text-slate-400">Open the app with no server, no internet. Not a cached skeleton â€” the full app, read and write, completely offline.</p>
            </div>

            <!-- Local-first database -->
            <div class="rounded-xl bg-green-500/[0.04] p-5 ring-1 ring-green-500/[0.15] transition-colors hover:bg-green-500/[0.07] hover:ring-green-500/[0.25]">
              <div class="mb-3 flex h-9 w-9 items-center justify-center rounded-lg bg-green-500/10 text-green-400">
                <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 5.625c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125" />
                </svg>
              </div>
              <h3 class="mb-1.5 text-[14px] font-medium text-white">Local-first</h3>
              <p class="text-[13px] leading-relaxed text-slate-400">Your full database lives in the browser. Every action is instant â€” zero network round trips.</p>
            </div>

            <!-- Real-time cross-tab sync -->
            <div class="rounded-xl bg-green-500/[0.04] p-5 ring-1 ring-green-500/[0.15] transition-colors hover:bg-green-500/[0.07] hover:ring-green-500/[0.25]">
              <div class="mb-3 flex h-9 w-9 items-center justify-center rounded-lg bg-green-500/10 text-green-400">
                <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                </svg>
              </div>
              <h3 class="mb-1.5 text-[14px] font-medium text-white">Rea-time cross tab, device sync</h3>
              <p class="text-[13px] leading-relaxed text-slate-400">Changes appear instantly across all tabs and devices. No polling. No refresh needed.</p>
            </div>

            <!-- Weekly planning view -->
            <div class="rounded-xl bg-green-500/[0.04] p-5 ring-1 ring-green-500/[0.15] transition-colors hover:bg-green-500/[0.07] hover:ring-green-500/[0.25]">
              <div class="mb-3 flex h-9 w-9 items-center justify-center rounded-lg bg-green-500/10 text-green-400">
                <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                </svg>
              </div>
              <h3 class="mb-1.5 text-[14px] font-medium text-white">Weekly planning view</h3>
              <p class="text-[13px] leading-relaxed text-slate-400">Visual week-as-columns layout. Drag tasks between days. See your full week at a glance.</p>
            </div>

            <!-- Mobile support -->
            <div class="rounded-xl bg-green-500/[0.04] p-5 ring-1 ring-green-500/[0.15] transition-colors hover:bg-green-500/[0.07] hover:ring-green-500/[0.25]">
              <div class="mb-3 flex h-9 w-9 items-center justify-center rounded-lg bg-green-500/10 text-green-400">
                <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 1.5H8.25A2.25 2.25 0 006 3.75v16.5a2.25 2.25 0 002.25 2.25h7.5A2.25 2.25 0 0018 20.25V3.75a2.25 2.25 0 00-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 20.25h3" />
                </svg>
              </div>
              <h3 class="mb-1.5 text-[14px] font-medium text-white">Mobile support</h3>
              <p class="text-[13px] leading-relaxed text-slate-400">Manage tasks from any device.</p>
            </div>

            <!-- One container, zero ops -->
            <div class="rounded-xl bg-green-500/[0.04] p-5 ring-1 ring-green-500/[0.15] transition-colors hover:bg-green-500/[0.07] hover:ring-green-500/[0.25]">
              <div class="mb-3 flex h-9 w-9 items-center justify-center rounded-lg bg-green-500/10 text-green-400">
                <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01" />
                </svg>
              </div>
              <h3 class="mb-1.5 text-[14px] font-medium text-white">One container, zero ops</h3>
              <p class="text-[13px] leading-relaxed text-slate-400">SQLite, single Docker container, no Postgres, no Redis. Self-host in under 60 seconds.</p>
            </div>
          </div>
        </div>
      </section>

      <!-- App Screenshot -->
      <section aria-label="App screenshot" class="relative px-6 py-24 border-t border-white/[0.04]">
        <div class="mx-auto max-w-5xl">
          <div class="overflow-hidden rounded-lg ring-1 ring-white/10 shadow-2xl shadow-black/50">
            <img
              src="/screen.png"
              alt="Will Be Done â€” task management with weekly timeline, kanban project boards, and drag-and-drop task organization"
              class="w-full"
            />
          </div>
        </div>
      </section>

      <!-- Features -->
      <section aria-label="Features" class="relative border-t border-white/[0.04] px-6 py-20">
        <div class="mx-auto max-w-5xl">
          <h2 class="mb-12 text-2xl font-bold tracking-tight text-white md:text-3xl">Everything you need. Nothing held back.</h2>

          <div class="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
            <!-- Weekly timeline -->
            <div class="rounded-xl bg-white/[0.02] p-5 ring-1 ring-white/[0.04] transition-colors hover:bg-white/[0.03] hover:ring-white/[0.06]">
              <div class="mb-3 flex h-9 w-9 items-center justify-center rounded-lg bg-blue-500/10 text-blue-400">
                <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                </svg>
              </div>
              <h3 class="mb-1.5 text-[14px] font-medium text-white">Weekly timeline</h3>
              <p class="text-[13px] leading-relaxed text-slate-400">See your entire week as columns. Drag tasks between days.</p>
            </div>

            <!-- Drag & drop -->
            <div class="rounded-xl bg-white/[0.02] p-5 ring-1 ring-white/[0.04] transition-colors hover:bg-white/[0.03] hover:ring-white/[0.06]">
              <div class="mb-3 flex h-9 w-9 items-center justify-center rounded-lg bg-blue-500/10 text-blue-400">
                <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4" />
                </svg>
              </div>
              <h3 class="mb-1.5 text-[14px] font-medium text-white">Drag &amp; drop</h3>
              <p class="text-[13px] leading-relaxed text-slate-400">Move tasks between days, projects, and categories.</p>
            </div>

            <!-- Kanban per project -->
            <div class="rounded-xl bg-white/[0.02] p-5 ring-1 ring-white/[0.04] transition-colors hover:bg-white/[0.03] hover:ring-white/[0.06]">
              <div class="mb-3 flex h-9 w-9 items-center justify-center rounded-lg bg-blue-500/10 text-blue-400">
                <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2" />
                </svg>
              </div>
              <h3 class="mb-1.5 text-[14px] font-medium text-white">Kanban per project</h3>
              <p class="text-[13px] leading-relaxed text-slate-400">Week, Month, Ideas, Someday â€” organize your way.</p>
            </div>

            <!-- Multiple spaces -->
            <div class="rounded-xl bg-white/[0.02] p-5 ring-1 ring-white/[0.04] transition-colors hover:bg-white/[0.03] hover:ring-white/[0.06]">
              <div class="mb-3 flex h-9 w-9 items-center justify-center rounded-lg bg-blue-500/10 text-blue-400">
                <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
                </svg>
              </div>
              <h3 class="mb-1.5 text-[14px] font-medium text-white">Multiple spaces</h3>
              <p class="text-[13px] leading-relaxed text-slate-400">Separate workspaces for work, personal, and side projects.</p>
            </div>

            <!-- Offline first -->
            <div class="rounded-xl bg-white/[0.02] p-5 ring-1 ring-white/[0.04] transition-colors hover:bg-white/[0.03] hover:ring-white/[0.06]">
              <div class="mb-3 flex h-9 w-9 items-center justify-center rounded-lg bg-blue-500/10 text-blue-400">
                <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M3 3l18 18M8.288 15.038a5.25 5.25 0 017.424 0M5.106 11.856c3.807-3.808 9.98-3.808 13.788 0M1.924 8.674c5.565-5.565 14.587-5.565 20.152 0M12.53 18.22l-.53.53-.53-.53a.75.75 0 011.06 0z" />
                </svg>
              </div>
              <h3 class="mb-1.5 text-[14px] font-medium text-white">Offline first</h3>
              <p class="text-[13px] leading-relaxed text-slate-400">App works fully when your server is offline. Opens in the browser, reads and writes locally, syncs when you reconnect.</p>
            </div>

            <!-- Vim keybindings -->
            <div class="rounded-xl bg-white/[0.02] p-5 ring-1 ring-white/[0.04] transition-colors hover:bg-white/[0.03] hover:ring-white/[0.06]">
              <div class="mb-3 flex h-9 w-9 items-center justify-center rounded-lg bg-blue-500/10 text-blue-400">
                <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
              </div>
              <h3 class="mb-1.5 text-[14px] font-medium text-white">Vim keybindings</h3>
              <p class="text-[13px] leading-relaxed text-slate-400">Navigate with j/k, quick actions with shortcuts.</p>
            </div>

            <!-- One Docker container -->
            <div class="rounded-xl bg-white/[0.02] p-5 ring-1 ring-white/[0.04] transition-colors hover:bg-white/[0.03] hover:ring-white/[0.06]">
              <div class="mb-3 flex h-9 w-9 items-center justify-center rounded-lg bg-blue-500/10 text-blue-400">
                <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01" />
                </svg>
              </div>
              <h3 class="mb-1.5 text-[14px] font-medium text-white">One Docker container</h3>
              <p class="text-[13px] leading-relaxed text-slate-400">Self-host with a single command. No complex setup.</p>
            </div>

            <!-- Instant sync -->
            <div class="rounded-xl bg-white/[0.02] p-5 ring-1 ring-white/[0.04] transition-colors hover:bg-white/[0.03] hover:ring-white/[0.06]">
              <div class="mb-3 flex h-9 w-9 items-center justify-center rounded-lg bg-blue-500/10 text-blue-400">
                <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                </svg>
              </div>
              <h3 class="mb-1.5 text-[14px] font-medium text-white">Real-time sync</h3>
              <p class="text-[13px] leading-relaxed text-slate-400">Changes propagate instantly across all tabs and devices. No polling or manual refresh needed.</p>
            </div>

            <!-- Top tier performance -->
            <div class="rounded-xl bg-white/[0.02] p-5 ring-1 ring-white/[0.04] transition-colors hover:bg-white/[0.03] hover:ring-white/[0.06]">
              <div class="mb-3 flex h-9 w-9 items-center justify-center rounded-lg bg-blue-500/10 text-blue-400">
                <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z" />
                </svg>
              </div>
              <h3 class="mb-1.5 text-[14px] font-medium text-white">Instant UI</h3>
              <p class="text-[13px] leading-relaxed text-slate-400">Local database means every action is immediate. No waiting for server round trips.</p>
            </div>

            <!-- Mobile ready -->
            <div class="rounded-xl bg-white/[0.02] p-5 ring-1 ring-white/[0.04] transition-colors hover:bg-white/[0.03] hover:ring-white/[0.06]">
              <div class="mb-3 flex h-9 w-9 items-center justify-center rounded-lg bg-blue-500/10 text-blue-400">
                <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 1.5H8.25A2.25 2.25 0 006 3.75v16.5a2.25 2.25 0 002.25 2.25h7.5A2.25 2.25 0 0018 20.25V3.75a2.25 2.25 0 00-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 20.25h3" />
                </svg>
              </div>
              <h3 class="mb-1.5 text-[14px] font-medium text-white">Mobile ready</h3>
              <p class="text-[13px] leading-relaxed text-slate-400">Manage tasks on the go from any device.</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Roadmap -->
      <section aria-label="Roadmap" class="relative border-t border-white/[0.04] px-6 py-20">
        <div class="mx-auto max-w-5xl">
          <div class="mb-8 flex items-center gap-3">
            <div class="flex h-6 w-6 items-center justify-center rounded-md bg-amber-500/10">
              <div class="h-1.5 w-1.5 rounded-full bg-amber-400"></div>
            </div>
            <h2 class="text-lg font-semibold text-white">Coming soon</h2>
          </div>

          <div class="grid gap-3 md:grid-cols-2">
            <div class="flex items-center gap-3 rounded-lg bg-white/[0.02] px-4 py-3 ring-1 ring-white/[0.04]">
              <svg class="h-4 w-4 flex-shrink-0 text-slate-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              <span class="text-[13px] text-slate-300">Task comments and attachments</span>
            </div>
            <div class="flex items-center gap-3 rounded-lg bg-white/[0.02] px-4 py-3 ring-1 ring-white/[0.04]">
              <svg class="h-4 w-4 flex-shrink-0 text-slate-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              <span class="text-[13px] text-slate-300">Global search</span>
            </div>
            <div class="flex items-center gap-3 rounded-lg bg-white/[0.02] px-4 py-3 ring-1 ring-white/[0.04]">
              <svg class="h-4 w-4 flex-shrink-0 text-slate-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              <span class="text-[13px] text-slate-300">More vim keybindings</span>
            </div>
            <div class="flex items-center gap-3 rounded-lg bg-white/[0.02] px-4 py-3 ring-1 ring-white/[0.04]">
              <svg class="h-4 w-4 flex-shrink-0 text-slate-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              <span class="text-[13px] text-slate-300">Desktop app with global quick-add shortcut</span>
            </div>
            <div class="flex items-center gap-3 rounded-lg bg-white/[0.02] px-4 py-3 ring-1 ring-white/[0.04]">
              <svg class="h-4 w-4 flex-shrink-0 text-slate-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              <span class="text-[13px] text-slate-300">API &amp; MCP integration</span>
            </div>
          </div>
        </div>
      </section>

      <!-- CTA -->
      <section aria-label="Call to action" class="relative border-t border-white/[0.04] px-6 py-20">
        <div class="mx-auto max-w-5xl">
          <div class="rounded-2xl bg-gradient-to-br from-blue-500/10 via-transparent to-indigo-500/10 p-8 ring-1 ring-white/[0.06] md:p-12">
            <div class="mx-auto max-w-xl text-center">
              <h2 class="mb-4 text-2xl font-bold tracking-tight text-white md:text-3xl">
                Ready to own your tasks?
              </h2>
              <p class="mb-8 text-[15px] text-slate-400">
                Try the cloud version free while in alpha, or self-host with one Docker command. Your data, your rules.
              </p>
              <div class="flex flex-wrap justify-center gap-3">
                <a
                  href={`${APP_URL}/signup`}
                  class="group inline-flex items-center gap-2 rounded-xl bg-blue-500 px-6 py-3 text-[14px] font-semibold text-white shadow-lg shadow-blue-500/25 transition-all hover:bg-blue-400"
                  data-ph-event="signup_cta_clicked"
                  data-ph-section="cta"
                >
                  Get Started â€” It's Free
                  <svg class="h-4 w-4 transition-transform group-hover:translate-x-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                  </svg>
                </a>
                <a
                  href="https://demo.will-be-done.app"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="inline-flex items-center gap-2 rounded-xl border border-blue-500/30 bg-blue-500/[0.07] px-6 py-3 text-[14px] font-medium text-blue-300 transition-all hover:border-blue-400/50 hover:bg-blue-500/[0.12] hover:text-blue-200"
                  data-ph-event="demo_clicked"
                  data-ph-section="cta"
                >
                  <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.75">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z" />
                  </svg>
                  Try Demo
                </a>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="relative border-t border-white/[0.04] px-6 py-8">
      <div class="mx-auto flex max-w-5xl flex-col items-center justify-between gap-4 md:flex-row">
        <div class="flex items-center gap-2.5">
          <!-- Logo -->
          <div class="relative" style="width: 24px; height: 24px;">
            <div class="absolute inset-0 rounded-[13%] bg-blue-500/30 blur-md" style="transform: scale(1.15);"></div>
            <svg width="24" height="24" viewBox="0 0 150 150" fill="none" xmlns="http://www.w3.org/2000/svg" class="relative">
              <rect width="150" height="150" rx="19" fill="url(#paint0_footer)" />
              <path fill-rule="evenodd" clip-rule="evenodd" d={logoPath} fill="url(#paint1_footer)" />
              <defs>
                <linearGradient id="paint0_footer" x1="9" y1="5.5" x2="150" y2="150" gradientUnits="userSpaceOnUse">
                  <stop stop-color="#3b82f6" />
                  <stop offset="1" stop-color="#1e40af" />
                </linearGradient>
                <linearGradient id="paint1_footer" x1="27" y1="28" x2="118.5" y2="120.5" gradientUnits="userSpaceOnUse">
                  <stop stop-color="#93c5fd" />
                  <stop offset="1" stop-color="#60a5fa" />
                </linearGradient>
              </defs>
            </svg>
          </div>
          <span class="text-[13px] font-medium text-slate-400">Will Be Done</span>
        </div>

        <div class="flex items-center gap-4 text-[12px] text-slate-500">
          <span>Open Source</span>
          <span class="text-slate-700">Â·</span>
          <span>AGPL license</span>
          <span class="text-slate-700">Â·</span>
          <a
            href="https://github.com/will-be-done/will-be-done"
            target="_blank"
            rel="noopener noreferrer"
            class="flex items-center gap-1.5 text-slate-400 transition-colors hover:text-white"
            data-ph-event="github_link_clicked"
            data-ph-section="footer"
          >
            <svg class="h-4 w-4" fill="currentColor" viewBox="0 0 24 24">
              <path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd" />
            </svg>
            GitHub
          </a>
        </div>
      </div>
    </footer>

    <!-- Video modal (native dialog) -->
    <dialog
      id="video-modal"
      class="m-auto w-full max-w-4xl rounded-xl bg-transparent p-4 backdrop:bg-black/80 backdrop:backdrop-blur-sm"
    >
      <div class="relative">
        <button
          id="close-modal"
          class="absolute -top-10 right-0 text-white/70 transition-colors hover:text-white"
          aria-label="Close video"
        >
          <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
        <video
          id="modal-video"
          controls
          playsinline
          class="w-full rounded-xl shadow-2xl ring-1 ring-white/10"
        >
          <source src="/site_embed_1080p.webm" type="video/webm" />
          <source src="/site_embed_1080p.mp4" type="video/mp4" />
        </video>
      </div>
    </dialog>
  </div>
</Layout>

<script>
  // Mouse parallax
  document.addEventListener('mousemove', (e) => {
    const x = (e.clientX / window.innerWidth - 0.5) * 2;
    const y = (e.clientY / window.innerHeight - 0.5) * 2;
    document.querySelectorAll<HTMLElement>('[data-parallax]').forEach((el) => {
      const rot = el.dataset.rotate ?? '0';
      const mx = parseFloat(el.dataset.mx ?? '0');
      const my = parseFloat(el.dataset.my ?? '0');
      const isVideoWrapper = el.style.transform.includes('translate(-50%, -50%)');
      if (isVideoWrapper) {
        el.style.transform = `translate(-50%, -50%) translate(${x * mx}px, ${y * my}px)`;
      } else {
        el.style.transform = `rotate(${rot}deg) translate(${x * mx}px, ${y * my}px)`;
      }
    });
  });

  // Video modal
  const modal = document.getElementById('video-modal') as HTMLDialogElement;
  const modalVideo = document.getElementById('modal-video') as HTMLVideoElement;

  document.querySelectorAll('[data-open-modal]').forEach((btn) => {
    btn.addEventListener('click', () => {
      modal.showModal();
      modalVideo.play();
      window.posthog?.capture('demo_video_opened');
    });
  });

  document.getElementById('close-modal')?.addEventListener('click', () => {
    modal.close();
    modalVideo.pause();
    modalVideo.currentTime = 0;
    window.posthog?.capture('demo_video_closed');
  });

  modal.addEventListener('click', (e) => {
    if (e.target === modal) {
      modal.close();
      modalVideo.pause();
      modalVideo.currentTime = 0;
      window.posthog?.capture('demo_video_closed');
    }
  });

  // PostHog: CTA and link click tracking
  document.querySelectorAll<HTMLAnchorElement>('[data-ph-event]').forEach((el) => {
    el.addEventListener('click', () => {
      const event = el.dataset.phEvent!;
      const props: Record<string, string> = {};
      if (el.dataset.phSection) props['section'] = el.dataset.phSection;
      window.posthog?.capture(event, props);
    });
  });
</script>
